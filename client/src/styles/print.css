/* Global Print Styles for RoboBooks */
/* This file ensures print/PDF output matches preview exactly */

@media print {
  /* 1) Make everything invisible by default */
  body * {
    visibility: hidden !important;
  }

  /* 2) Make only the invoice visible */
  .invoice-container,
  .invoice-container * {
    visibility: visible !important;
  }

  /* 3) Remove app shell layout completely (defense-in-depth) */
  header, nav, aside, footer,
  .app-header, .app-topbar, .app-sidebar, .app-footer,
  .left-rail, .right-rail, .floating-btn, .fab, .drawer, .drawer-backdrop,
  [role="navigation"], [data-role="sidebar"],
  /* Specific RoboBooks selectors */
  .flex.flex-col.h-screen, /* Dashboard layout wrapper */
  .main-content-scrollbar, /* Main content area */
  .print\\:hidden, /* Tailwind print:hidden */
  .no-print, /* Generic no-print class */
  [data-print-control="true"], /* Print control buttons */
  /* Additional selectors for complete hiding */
  .bg-gray-100, /* Print controls background */
  .border-b, /* Print controls border */
  .print-controls /* Print controls container */
  {
    display: none !important;
  }

  /* 4) Reset page background/spacing */
  html, body, #__next, #root {
    margin: 0 !important;
    padding: 0 !important;
    background: #ffffff !important;
    height: auto !important;
    overflow: visible !important;
  }

  /* 5) Force accurate colors & borders in print */
  .invoice-container, .invoice-container * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* 6) Normalize invoice sizing & center on A4 (tune width if needed) */
  .print-root {
    margin: 0 !important;
    padding: 0 !important;
    background: #ffffff !important;
    height: auto !important;
    min-height: auto !important;
  }

  .invoice-container {
    position: static !important;
    left: 0 !important; 
    top: 0 !important;
    transform: none !important;
    width: 190mm !important;            /* inside @page margins */
    max-width: 190mm !important;
    margin: 0 auto !important;
    padding: 0 !important;
    background: #ffffff !important;
  }

  /* 7) Kill min-heights that create bottom blank space */
  .min-h-screen, .h-screen, .min-h-[100vh], .h-[100vh],
  .min-h-[100dvh], .h-[100dvh], .layout-content,
  .flex.flex-col.h-screen /* Dashboard layout height */
  {
    min-height: initial !important;
    height: auto !important;
  }

  /* 8) Avoid table breaks */
  table { 
    page-break-inside: avoid !important; 
    border-collapse: collapse !important; 
  }
  tr, td, th { 
    page-break-inside: avoid !important; 
  }

  /* 9) Disable sticky/fixed in invoice scope */
  .invoice-container .sticky,
  .invoice-container [style*="position: sticky"],
  .invoice-container [style*="position:fixed"] {
    position: static !important;
    top: auto !important;
  }

  /* 10) Hide "Print" buttons or any UI controls */
  .no-print, 
  [data-print-control="true"],
  .print-controls,
  button[onclick*="handlePrint"],
  button[onclick*="handleBack"]
  { 
    display: none !important; 
  }

  /* 11) Ensure proper text rendering */
  .invoice-container {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
    line-height: 1.4 !important;
  }

  /* 12) Remove any transforms that might distort print */
  .invoice-container * {
    transform: none !important;
    zoom: 1 !important;
  }
}

/* Page box size & margins */
@page {
  size: A4;
  margin: 12mm; /* tweak to match SS1 white space */
}
